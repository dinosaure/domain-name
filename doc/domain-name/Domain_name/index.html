<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Domain_name (domain-name.Domain_name)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">domain-name</a> &#x00BB; Domain_name</nav><h1>Module <code>Domain_name</code></h1><nav class="toc"><ul><li><a href="#constructor">Constructor</a></li><li><a href="#string-representation">String representation</a></li><li><a href="#predicates-and-basic-operations">Predicates and basic operations</a></li><li><a href="#comparison">Comparison</a></li><li><a href="#collections">Collections</a></li><li><a href="#string-list-representation">String list representation</a></li><li><a href="#pretty-printer">Pretty printer</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>t</code></dt><dd><p>The type of a domain name, a sequence of labels separated by dots. Each label may contain any bytes. The length of each label may not exceed 63 charactes. The total length of a domain name is limited to 253 (byte representation is 255), but other protocols (such as SMTP) may apply even smaller limits. A domain name label is case preserving, comparison is done in a case insensitive manner. Every <code>t</code> is a fully qualified domain name, its last label is the <code>root</code> label.</p><p>The invariants on the length of domain names are preserved throughout the module - no <code>t</code> will exist which violates these.</p><p>The specification of domain names originates from <a href="https://tools.ietf.org/html/rfc1035">RFC 1035</a>.</p><p>Constructing a <code>t</code> (via <code>of_string</code>, <code>of_string_exn</code>, <code>of_strings</code>) does not require a trailing dot.</p><p><em>0.1.2 - <a href="https://github.com/hannesm/domain-name">homepage</a></em></p></dd></dl><section><header><h2 id="constructor"><a href="#constructor" class="anchor"></a>Constructor</h2></header><dl><dt class="spec value" id="val-root"><a href="#val-root" class="anchor"></a><code><span class="keyword">val </span>root : <a href="index.html#type-t">t</a></code></dt><dd><p><code>root</code> is the root domain (&quot;.&quot;), the empty label.</p></dd></dl></section><section><header><h2 id="string-representation"><a href="#string-representation" class="anchor"></a>String representation</h2></header><dl><dt class="spec value" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span class="keyword">val </span>of_string : ?&#8288;hostname:bool <span>&#45;&gt;</span> string <span>&#45;&gt;</span> (<a href="index.html#type-t">t</a>, [&gt; `Msg of string ]) Stdlib.result</code></dt><dd><p><code>of_string ~hostname name</code> is either <code>t</code>, the domain name, or an error if the provided <code>name</code> is not a valid domain name. If <code>hostname</code> is provided and <code>true</code> (the default), the contents is additionally checked for being a valid hostname using <a href="index.html#val-is_hostname"><code>is_hostname</code></a>. A trailing dot is not requred.</p></dd></dl><dl><dt class="spec value" id="val-of_string_exn"><a href="#val-of_string_exn" class="anchor"></a><code><span class="keyword">val </span>of_string_exn : ?&#8288;hostname:bool <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>of_string_exn ~hostname name</code> is <code>t</code>, the domain name. If <code>hostname</code> is provided and <code>true</code> (the default), the contents is additionally checked for being a valid hostname using <a href="index.html#val-is_hostname"><code>is_hostname</code></a>. A trailing dot is not required.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>name</code> is not a valid domain name.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val </span>to_string : ?&#8288;trailing:bool <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>to_string ~trailing t</code> is <code>String.concat ~sep:&quot;.&quot; (to_strings t)</code>, a human-readable representation of <code>t</code>. If <code>trailing</code> is provided and <code>true</code> (defaults to <code>false</code>), the resulting string will contain a trailing dot.</p></dd></dl></section><section><header><h2 id="predicates-and-basic-operations"><a href="#predicates-and-basic-operations" class="anchor"></a>Predicates and basic operations</h2></header><dl><dt class="spec value" id="val-canonical"><a href="#val-canonical" class="anchor"></a><code><span class="keyword">val </span>canonical : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>canonical t</code> is <code>t'</code>, the canonical domain name, as specified in RFC 4034 (and 2535): all characters are lowercase.</p></dd></dl><dl><dt class="spec value" id="val-is_hostname"><a href="#val-is_hostname" class="anchor"></a><code><span class="keyword">val </span>is_hostname : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>is_hostname t</code> is <code>true</code> if <code>t</code> is a hostname: the contents of the domain name is limited: each label may start with a digit or letter, followed by digits, letters, or hyphens.</p></dd></dl><dl><dt class="spec value" id="val-is_service"><a href="#val-is_service" class="anchor"></a><code><span class="keyword">val </span>is_service : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>is_service t</code> is <code>true</code> if <code>t</code> contains a service label - if: The first label is a service name (or port number); an underscore preceding 1-15 characters from the set <code>- a-z A-Z 0-9</code>. The service name may not contain a hyphen (<code>-</code>) following another hyphen; no hyphen at the beginning or end.</p><p>The second label is the protocol, one of <code>_tcp</code>, <code>_udp</code>, or <code>_sctp</code>. The remaining labels must form a valid hostname.</p><p>This function can be used to validate RR's of the types SRV (RFC 2782) and TLSA (RFC 7671).</p></dd></dl><dl><dt class="spec value" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span class="keyword">val </span>sub : subdomain:<a href="index.html#type-t">t</a> <span>&#45;&gt;</span> domain:<a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>sub ~subdomain ~domain</code> is <code>true</code> if <code>subdomain</code> contains any labels prepended to <code>domain</code>: <code>foo.bar.com</code> is a subdomain of <code>bar.com</code> and of <code>com</code>, <code>sub ~subdomain:x ~domain:root</code> is true for all <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-prepend"><a href="#val-prepend" class="anchor"></a><code><span class="keyword">val </span>prepend : ?&#8288;hostname:bool <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> (<a href="index.html#type-t">t</a>, [&gt; `Msg of string ]) Stdlib.result</code></dt><dd><h2 id="label-addition-and-removal"><a href="#label-addition-and-removal" class="anchor"></a>Label addition and removal</h2><p><code>prepend ~hostname name pre</code> is either <code>t</code>, the new domain name, or an error. If <code>hostname</code> is provided and <code>true</code> (the default), the resulting domain name is checked for being a valid host name using <a href="index.html#val-is_hostname"><code>is_hostname</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-prepend_exn"><a href="#val-prepend_exn" class="anchor"></a><code><span class="keyword">val </span>prepend_exn : ?&#8288;hostname:bool <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>prepend_exn ~hostname name pre</code> is <code>t</code>, the new domain name.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>pre</code> is not a valid domain name. If <code>hostname</code> is provided and <code>true</code> (the default), the contents is additionally checked for being a valid host name using <a href="index.html#val-is_hostname"><code>is_hostname</code></a>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-drop_labels"><a href="#val-drop_labels" class="anchor"></a><code><span class="keyword">val </span>drop_labels : ?&#8288;back:bool <span>&#45;&gt;</span> ?&#8288;amount:int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<a href="index.html#type-t">t</a>, [&gt; `Msg of string ]) Stdlib.result</code></dt><dd><p><code>drop_labels ~back ~amount t</code> is either <code>t</code>, a domain name with <code>amount</code> (defaults to 1) labels dropped from the beginning (unless <code>back</code> is provided and <code>true</code>, defaults to <code>false</code>). <code>drop_labels</code> applied to <code>foo.com</code> is <code>com</code>.</p></dd></dl><dl><dt class="spec value" id="val-drop_labels_exn"><a href="#val-drop_labels_exn" class="anchor"></a><code><span class="keyword">val </span>drop_labels_exn : ?&#8288;back:bool <span>&#45;&gt;</span> ?&#8288;amount:int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>drop_labels_exn ~back ~amount t</code> is either <code>t</code>, a domain name with <code>amount</code> (defaults to 1) labels dropped from the beginning (unless <code>back</code> is provided and <code>true</code>, defaults to <code>false</code>). <code>drop_labels</code> applied to <code>foo.com</code> is <code>com</code>.</p><dl><dt>raises Invalid_argument</dt><dd><p>if there are not sufficient labels.</p></dd></dl></dd></dl></section><section><header><h2 id="comparison"><a href="#comparison" class="anchor"></a>Comparison</h2></header><dl><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val </span>equal : ?&#8288;case_sensitive:bool <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>equal ~case t t'</code> is <code>true</code> if all labels of <code>t</code> and <code>t'</code> are equal. If <code>case_sensitive</code> is provided and <code>true</code>, the cases of the labels are respected (default: <code>false</code>).</p></dd></dl><dl><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val </span>compare : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>compare t t'</code> compares the domain names <code>t</code> and <code>t'</code> using a case insensitive string comparison.</p></dd></dl><dl><dt class="spec value" id="val-compare_sub"><a href="#val-compare_sub" class="anchor"></a><code><span class="keyword">val </span>compare_sub : string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> int</code></dt><dd><p><code>compare_sub t t'</code> compares the labels <code>t</code> and <code>t'</code> using a case insensitive string comparison.</p></dd></dl></section><section><header><h2 id="collections"><a href="#collections" class="anchor"></a>Collections</h2></header><dl><dt class="spec module" id="module-Map"><a href="#module-Map" class="anchor"></a><code><span class="keyword">module </span><a href="Map/index.html">Map</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The module of a domain name map</p></dd></dl><dl><dt class="spec module" id="module-Set"><a href="#module-Set" class="anchor"></a><code><span class="keyword">module </span>Set : Stdlib.Set.S<span class="keyword"> with </span><span class="keyword">type </span><a href="index.html#module-Set">Set</a>.elt<span class="keyword"> = </span><a href="index.html#type-t">t</a></code></dt><dd><p>The module of a domain name set</p></dd></dl></section><section><header><h2 id="string-list-representation"><a href="#string-list-representation" class="anchor"></a>String list representation</h2></header><dl><dt class="spec value" id="val-of_strings"><a href="#val-of_strings" class="anchor"></a><code><span class="keyword">val </span>of_strings : ?&#8288;hostname:bool <span>&#45;&gt;</span> string list <span>&#45;&gt;</span> (<a href="index.html#type-t">t</a>, [&gt; `Msg of string ]) Stdlib.result</code></dt><dd><p><code>of_strings ~hostname labels</code> is either <code>t</code>, a domain name, or an error if the provided <code>labels</code> violate domain name constraints. If <code>hostname</code> is provided and <code>true</code> (the default), the labels are additionally checked for being a valid hostname using <a href="index.html#val-is_hostname"><code>is_hostname</code></a>. A trailing empty label is not required.</p></dd></dl><dl><dt class="spec value" id="val-of_strings_exn"><a href="#val-of_strings_exn" class="anchor"></a><code><span class="keyword">val </span>of_strings_exn : ?&#8288;hostname:bool <span>&#45;&gt;</span> string list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>of_strings_exn ~hostname labels</code> is <code>t</code>, a domain name. A trailing empty label is not required.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>labels</code> are not a valid domain name. If <code>hostname</code> is provided and <code>true</code> (the default), the labels are additionally checked for being a valid hostname using <a href="index.html#val-is_hostname"><code>is_hostname</code></a>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-to_strings"><a href="#val-to_strings" class="anchor"></a><code><span class="keyword">val </span>to_strings : ?&#8288;trailing:bool <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string list</code></dt><dd><p><code>to_strings ~trailing t</code> is the list of labels of <code>t</code>. If <code>trailing</code> is provided and <code>true</code> (defaults to <code>false</code>), the resulting list will contain a trailing empty label.</p></dd></dl></section><section><header><h2 id="pretty-printer"><a href="#pretty-printer" class="anchor"></a>Pretty printer</h2></header><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val </span>pp : <a href="index.html#type-t">t</a> Fmt.t</code></dt><dd><p><code>pp ppf t</code> pretty prints the domain name <code>t</code> on <code>ppf</code>.</p></dd></dl></section></div></body></html>